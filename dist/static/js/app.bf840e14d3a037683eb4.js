webpackJsonp([1],{"+ETa":function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7+uW"),i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var n=a("VU/8")({name:"App"},i,!1,function(t){a("+ETa")},null,null).exports,r=a("/ocq"),o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{attrs:{id:"landing-header"}},[e("h1",[this._v("  Where to Camp-App!  ")]),this._v(" "),e("router-link",{staticClass:"btn btn-lg btn-success",attrs:{to:"explore"}},[this._v(" Exploring locations in the Baja! ")])],1),this._v(" "),this._m(0)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("ul",{staticClass:"slideshow"},[e("li"),this._v(" "),e("li"),this._v(" "),e("li"),this._v(" "),e("li"),this._v(" "),e("li")])}]};var c=a("VU/8")({name:"landing-header",data:function(){return{}}},o,!1,function(t){a("gchZ")},"data-v-219e8793",null).exports,l=a("BO1k"),p=a.n(l),d=a("woOf"),m=a.n(d),u=a("mtWM"),v=a.n(u),h=a("1e2d"),g=a.n(h),w={name:"explore",data:function(){return{camp:{loc_id:"",name:"",status:"",rating:"",picture:""},newCamp:{id:"",name:"",status:"",rating:"",picture:"",locations:""},updateProp:{rating:6,name:"",status:""},campObjectSelected:"",locations:[],vMap:null,stars:"",starSpan:"",timer:"",newMarker:"",btnEdit:!1,loader:!1,isSelected:!1,isAddingNewCamp:!1}},created:function(){},mounted:function(){var t=this;v.a.get("/locations").then(function(e){t.locations=e.data,g.a.accessToken="pk.eyJ1IjoibXJjaXNjb3NlcmthIiwiYSI6ImNqdjdtb3k5ZTAxZGo0ZHFubTFqdzc4bHoifQ.NTXtmesugzahUhMA4We-iw";var a=new g.a.Map({container:"explore",style:"mapbox://styles/mapbox/satellite-v9",center:[-110.127475,23.895643],zoom:8});t.vMap=a;var s=t,i={id:"symbols",type:"symbol",source:"camps",layout:{"icon-image":"marker","icon-size":1.2}};a.on("load",function(){a.loadImage("https://i.imgur.com/aAIk82g.png",function(t,e){if(t)throw t;a.addImage("marker",e),a.addSource("camps",{type:"geojson",data:s.locations}),a.addLayer(i),a.on("click","symbols",function(t){s.campObjectSelected=m()({},t),s.isAddingNewCamp?$("#exampleModal").modal("show"):s.displayCampDetails()}),s.timer=window.setInterval(function(){v.a.get("/locations").then(function(t){if(s.locations=t.data,a.getSource("camps").setData(s.locations),s.isSelected&&s.btnEdit){var e=s.locations.features.find(function(t){return t.properties.loc_id==s.camp.loc_id});s.camp.name=e.properties.loc_name,s.camp.status=e.properties.status,s.camp.rating=e.properties.rating,s.drawRating()}}).catch(function(t){console.log("Error get: "),console.log(t)})},4e3),a.on("mouseenter","symbols",function(){a.getCanvas().style.cursor="pointer"}),a.on("mouseleave","symbols",function(){a.getCanvas().style.cursor=""})})})}).catch(function(t){console.log("Error in: "),console.log(t)})},methods:{resumeInterval:function(){},displayCampDetails:function(){this.setLoader(-1),this.isSelected&&this.resetInputs(),this.resetSelfValues(),this.isSelected=!0,this.vMap.flyTo({center:this.campObjectSelected.features[0].geometry.coordinates,zoom:11}),this.camp.loc_id=this.campObjectSelected.features[0].properties.loc_id,this.camp.name=this.campObjectSelected.features[0].properties.loc_name,this.camp.status=this.campObjectSelected.features[0].properties.status,this.camp.rating=this.campObjectSelected.features[0].properties.rating,this.camp.picture=this.campObjectSelected.features[0].properties.picture,this.drawRating()},resetSelfValues:function(){this.isSelected=!1,this.isAddingNewCamp=!1,this.updateProp={rating:6,name:"",status:""},this.btnEdit=!0},stopInterval:function(){clearInterval(this.timer)},centerMap:function(){this.setLoader(-1),this.vMap&&this.vMap.flyTo({center:[-110.127475,23.895643],zoom:8})},centerMapOnMarker:function(){this.vMap&&this.vMap.flyTo({center:this.newCamp.locations,zoom:11})},addNewCamp:function(){this.setLoader(-1),this.resetSelfValues();var t=this;t.newMarker=new g.a.Marker({draggable:!0}).setLngLat(t.vMap.getCenter()).addTo(t.vMap),t.newCamp.locations=t.newMarker.getLngLat(),t.newMarker.on("dragend",function(){t.newCamp.locations=t.newMarker.getLngLat(),newCampCoordinates.style.display="block",newCampCoordinates.innerHTML="Longitude: "+t.newCamp.locations.lng+"<br />Latitude: "+t.newCamp.locations.lat}),t.isAddingNewCamp=!0},discardNewCamp:function(){this.resetSelfValues(),this.newMarker.remove(),this.displayCampDetails()},saveNewCamp:function(){var t=this;t.newCamp.locations="POINT("+this.newCamp.locations.lng+" "+this.newCamp.locations.lat+")",v.a.post("/locations/insert",this.newCamp).then(function(e){t.setLoader(0),t.newMarker.remove(),t.setLoader(1),t.resetSelfValues(),t.resetNewCampInputs(),window.setTimeout(function(){t.setLoader(-1)},2500)}).catch(function(t){console.log("Error in post: "),console.log(t)})},setLoader:function(t){switch(t){case-1:document.getElementsByClassName("checkmark")[0].style.display="none",document.getElementsByClassName("circle-loader")[0].classList.remove("load-complete"),this.loader=!1;break;case 0:this.loader=!0,document.getElementsByClassName("checkmark")[0].style.display="none";break;case 1:document.getElementsByClassName("circle-loader")[0].classList.add("load-complete"),document.getElementsByClassName("checkmark")[0].style.display="block"}},drawRating:function(){this.stars="";for(var t=this.camp.rating,e=1;e<=t;e++)this.stars+=" <span id=star_"+e+' class="fa fa-star"></span> ';for(;t<5;t++)this.stars+=" <span id=star_"+parseInt(t+1)+' class="far fa-star"></span> '},changeEdit:function(){this.btnEdit=!1,document.querySelectorAll("input[type=text]").forEach(function(t){t.disabled=!1}),document.getElementById("starsDiv").removeAttribute("style"),this.starSpan=document.getElementsByTagName("span");var t=this.starSpan,e=this.updateProp,a=!0,s=!1,i=void 0;try{for(var n,r=p()(this.starSpan);!(a=(n=r.next()).done);a=!0){var o=n.value;o.style.cssText="cursor: pointer;",o.addEventListener("click",function(a){var s=a.target.id,i=parseInt(s.slice(s.length-1));e.rating=i;var n=void 0;for(n=0;n<=i;n++)t[n].style.cssText="cursor: pointer; color: red";if(i<5)for(;n<5;n++)t[n].style.cssText="cursor: pointer;"})}}catch(t){s=!0,i=t}finally{try{!a&&r.return&&r.return()}finally{if(s)throw i}}},changeName:function(t){this.updateProp.name=t},changeStatus:function(t){this.updateProp.status=t},saveEdit:function(){var t=this;this.setLoader(0);var e=this,a=this.locations.features.find(function(e){return e.properties.loc_id==t.camp.loc_id});this.updateProp.name&&(this.camp.name=this.updateProp.name.slice(0),a.properties.loc_name=this.updateProp.name.slice(0)),this.updateProp.status&&(this.camp.status=this.updateProp.status.slice(0),a.properties.status=this.updateProp.status.slice(0)),this.updateProp.rating<6&&(this.camp.rating=this.updateProp.rating,a.properties.rating=this.updateProp.rating),v.a.post("/locations/update",this.camp).then(function(){e.setLoader(1),e.drawRating(),window.setTimeout(function(){e.setLoader(-1)},2500)}).catch(function(t){console.log("Error in post: "),console.log(t)}),this.resetInputs()},resetInputs:function(){this.btnEdit=!0,document.querySelectorAll("input[type=text]").forEach(function(t){t.disabled=!0}),document.getElementById("starsDiv").style.cssText="background-color: rgba(113, 226, 241, 0.596); width: 10vw;";var t=!0,e=!1,a=void 0;try{for(var s,i=p()(this.starSpan);!(t=(s=i.next()).done);t=!0){s.value.removeAttribute("style")}}catch(t){e=!0,a=t}finally{try{!t&&i.return&&i.return()}finally{if(e)throw a}}this.updateProp={rating:6,name:"",status:""}},resetNewCampInputs:function(){this.newCamp.name="",this.newCamp.status="",this.newCamp.picture="",this.newCamp.rating=""}}},f={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"modal fade",attrs:{id:"exampleModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v("Are you sure you want to leave?")]),t._v(" "),s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:t.centerMapOnMarker}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("Ã—")])])]),t._v(" "),s("div",{staticClass:"modal-body"},[t._v("\n          If you leave now your data for the new camp will be lost\n        ")]),t._v(" "),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.centerMapOnMarker}},[t._v("Back")]),t._v(" "),s("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.discardNewCamp}},[t._v("Quit & Discard")])])])])]),t._v(" "),s("div",{attrs:{id:"explore"}},[s("section",{staticClass:"map-section",staticStyle:{width:"30vw",transform:"translateX(0px)"}},[s("header",[s("h2",[t._v("Places to Camp in The Baja!")]),t._v(" "),s("div",{attrs:{id:"iconsDiv"}},[s("div",{staticClass:"useful-links"},[s("p",{staticClass:"centerMap",on:{click:t.centerMap}},[t._v("Center map "),s("img",{attrs:{src:a("QYCG"),alt:"Center map"}})])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.isAddingNewCamp,expression:"!isAddingNewCamp"}],staticClass:"useful-links"},[s("p",{staticClass:"newCamp",on:{click:t.addNewCamp}},[t._v(" Add New Camp "),s("img",{attrs:{src:"https://i.imgur.com/aAIk82g.png",alt:"New Camp"}})])])])]),t._v(" "),s("div",{staticClass:"map-state-information"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.loader,expression:"loader"}],staticClass:"circle-loader"},[s("div",{staticClass:"checkmark draw"})]),t._v(" "),s("section",{directives:[{name:"show",rawName:"v-show",value:!t.isSelected&&!t.isAddingNewCamp,expression:"!isSelected && !isAddingNewCamp"}],staticClass:"camps-display"},[t._m(0),t._v(" "),s("h5",[t._v("... and see the camp details ")])]),t._v(" "),t.isAddingNewCamp?s("section",{staticClass:"newCampForm"},[s("h3",[t._v("New Camp Values")]),t._v(" "),s("form",{on:{submit:function(e){return e.preventDefault(),t.saveNewCamp(e)}}},[s("div",{staticClass:"newInputs"},[t._m(1),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newCamp.name,expression:"newCamp.name"}],staticClass:"dataDetails",attrs:{type:"text",id:"name",name:"name",minlength:"3",maxlength:"70",placeholder:"Name",required:""},domProps:{value:t.newCamp.name},on:{input:function(e){e.target.composing||t.$set(t.newCamp,"name",e.target.value)}}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newCamp.status,expression:"newCamp.status"}],staticClass:"dataDetails",attrs:{type:"text",id:"status",name:"status",minlength:"4",maxlength:"10",placeholder:"Type",required:""},domProps:{value:t.newCamp.status},on:{input:function(e){e.target.composing||t.$set(t.newCamp,"status",e.target.value)}}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newCamp.picture,expression:"newCamp.picture"}],staticClass:"dataDetails",attrs:{type:"url",id:"picture",name:"picture",minlength:"4",maxlength:"400",placeholder:"Picture URL",required:""},domProps:{value:t.newCamp.picture},on:{input:function(e){e.target.composing||t.$set(t.newCamp,"picture",e.target.value)}}}),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.newCamp.rating,expression:"newCamp.rating"}],staticClass:"dataDetails selectRating",attrs:{required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.newCamp,"rating",e.target.multiple?a:a[0])}}},[s("option",{attrs:{disabled:"",value:""}},[t._v("Rating")]),t._v(" "),s("option",{attrs:{value:"1"}},[t._v("1")]),t._v(" "),s("option",{attrs:{value:"2"}},[t._v("2")]),t._v(" "),s("option",{attrs:{value:"3"}},[t._v("3")]),t._v(" "),s("option",{attrs:{value:"4"}},[t._v("4")]),t._v(" "),s("option",{attrs:{value:"5"}},[t._v("5")])])])])]):t._e(),t._v(" "),t.isSelected?s("section",{staticClass:"details-display"},[s("h3",[t._v("Details")]),t._v(" "),s("div",{attrs:{id:"imgDiv"}},[s("img",{attrs:{id:"campPicture",src:t.camp.picture,alt:"Camp Picture"}})]),t._v(" "),s("button",{directives:[{name:"show",rawName:"v-show",value:t.btnEdit,expression:"btnEdit"}],staticClass:"detailsBtn btn btn-info",on:{click:t.changeEdit}},[s("i",{staticClass:"far fa-edit"}),t._v("Edit")]),t._v(" "),s("input",{directives:[{name:"show",rawName:"v-show",value:!t.btnEdit,expression:"!btnEdit"}],staticClass:"detailsBtn btn btn-success",attrs:{type:"submit",value:"Save Changes"},on:{click:t.saveEdit}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.camp.name,expression:"camp.name"}],staticClass:"dataDetails",attrs:{disabled:"",type:"text",id:"name",name:"name",required:"",minlength:"3",maxlength:"70"},domProps:{value:t.camp.name},on:{change:function(e){return t.changeName(t.camp.name)},input:function(e){e.target.composing||t.$set(t.camp,"name",e.target.value)}}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.camp.status,expression:"camp.status"}],staticClass:"dataDetails",attrs:{disabled:"",type:"text",id:"status",name:"status",required:"",minlength:"4",maxlength:"10"},domProps:{value:t.camp.status},on:{change:function(e){return t.changeStatus(t.camp.status)},input:function(e){e.target.composing||t.$set(t.camp,"status",e.target.value)}}}),t._v(" "),s("div",{staticStyle:{"background-color":"rgba(113, 226, 241, 0.596)",width:"10vw"},attrs:{id:"starsDiv"}},[s("br"),t._v(" "),s("p",{domProps:{innerHTML:t._s(t.stars)}}),t._v(" "),s("p",[t._v(t._s(t.camp.rating)+" / 5")])])]):t._e(),t._v(" "),s("button",{directives:[{name:"show",rawName:"v-show",value:t.locations&&!t.isAddingNewCamp,expression:"locations && !isAddingNewCamp"}],staticClass:"btn btn-dark",on:{click:t.stopInterval}},[t._v(" Stop getting data")])])])]),t._v(" "),s("pre",{attrs:{id:"newCampCoordinates"}})])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("h4",[this._v("Select a camp!  "),e("img",{attrs:{src:"https://i.imgur.com/aAIk82g.png",alt:"marker"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"detailsBtn btn btn-success",attrs:{type:"submit"}},[e("i",{staticClass:"fas fa-cloud-upload-alt"})])}]};var C=a("VU/8")(w,f,!1,function(t){a("lCjh")},"data-v-2c9ad982",null).exports;s.a.use(r.a);var y=new r.a({routes:[{path:"/",name:"slideshow",component:c},{path:"/explore",name:"explore",component:C}]});s.a.config.productionTip=!1,new s.a({el:"#app",router:y,components:{App:n},template:"<App/>"})},QYCG:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9Ijk2IiB3aWR0aD0iOTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgZmlsbD0iI2ZmZiI+PHBhdGggZD0iTTQ4IDRDMjMuNyA0IDQgMjMuNyA0IDQ4YzAgMjQuMzAxIDE5LjcgNDQgNDQgNDQgMjQuMzAxIDAgNDQtMTkuNjk5IDQ0LTQ0QzkyIDIzLjcgNzIuMzAxIDQgNDggNHptNCA3OS43NzNWNzJhNCA0IDAgMCAwLTggMHYxMS43NzNDMjcuMzE1IDgxLjkyOCAxNC4wNzIgNjguNjg1IDEyLjIyNyA1MkgyNGE0IDQgMCAwIDAgMC04SDEyLjIyN0MxNC4wNzIgMjcuMzE1IDI3LjMxNSAxNC4wNzIgNDQgMTIuMjI3VjI0YTQgNCAwIDAgMCA4IDBWMTIuMjI3QzY4LjY4NSAxNC4wNzIgODEuOTI4IDI3LjMxNSA4My43NzMgNDRINzJhNCA0IDAgMCAwIDAgOGgxMS43NzNDODEuOTI4IDY4LjY4NSA2OC42ODUgODEuOTI4IDUyIDgzLjc3M3oiLz48L3N2Zz4="},gchZ:function(t,e){},lCjh:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.bf840e14d3a037683eb4.js.map